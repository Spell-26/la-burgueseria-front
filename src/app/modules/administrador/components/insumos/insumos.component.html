<div class="container-section">
  <!-- Cabecera modulo -->
  <header class ="header-module">
    <h1>
      Insumos
    </h1>
  </header>
  <!-- Barra de acciones -->
  <div class="actions-container">
    <div class="search-container">
      <input type="text" placeholder="Buscar insumo..." [(ngModel)]="nombreBusqueda" (keyup)="buscarInsumos()">
    </div>
    <div class="btn-black">
      <button (click)="openDialog()">
        Nuevo Insumo
      </button>
    </div>
  </div>
  <!-- SecciÃ³n tabla de contenido -->
  <section class="component-main-content">
      <table class="tabla-listado" *ngIf="insumos.length > 0; else buscando" >
        <thead class="cabecera-tabla">
          <tr class="row-header">
            <th class="row-header-element">
              INSUMO
            </th>
            <th class="row-header-element">
              EN STOCK
            </th>
            <th class="row-header-element">
              ACCIONES
            </th>
          </tr>
        </thead>
        <tbody class="contenido-tabla">
          <tr class="row-contenido-tabla" *ngFor="let insumo of insumos; let i = index" >
            <td class="row-contenido-element">{{insumo.nombre}}</td>
            <td class="row-contenido-element, editable" *ngIf="!modoEdicion || (modoEdicion && i !== insumoEditandoIndex)" (click)="iniciarEdicion(i)">
              {{insumo.cantidad}}
            </td>
            <td class="row-contenido-element" *ngIf="modoEdicion && i === insumoEditandoIndex">
              {{insumo.cantidad}}
              <span>Nueva cantidad: </span>
              <input type="number" [(ngModel)]="cantidadEditada" />
            </td>
            <td class="row-contenido-element">
                <button class="btn-actualizar-element" *ngIf="modoEdicion && i === insumoEditandoIndex" (click)="guardarEdicion(i)">
                  Guardar
                </button>
              <button class="btn-eliminar-element" *ngIf="modoEdicion && i === insumoEditandoIndex" (click)="cancelarEdicion()">
                Cancelar
              </button>
              <button class="btn-eliminar-element" (click)="deleteInsumo(insumo.id)" *ngIf="!modoEdicion || (modoEdicion && i !== insumoEditandoIndex)">
                Borrar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    <div class="paginacion" *ngIf="insumos.length > 0">
      <img src="assets/icons/arrow-prev-small-svgrepo-com.svg" alt="anterior" *ngIf="!isFirst" (click)="previousPage()">
      <h3>Pagina {{pagina+1}}</h3>
      <img src="assets/icons/arrow-next-small-svgrepo-com.svg" alt="siguiente" *ngIf="!isLast" (click)="nextPage()">
    </div>
  </section>
</div>

<ng-template #buscando >
  <div class="cargando">
    <h2>No se han encontrado elementos para insumos.</h2>
    <img src="assets/img/running-cat.gif" alt="">

  </div>
</ng-template>
