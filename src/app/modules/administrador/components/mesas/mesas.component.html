<div class="container-section">
  <header class="header-module">
    <h1>Mesas</h1>
  </header>
  <div class="actions-container">
    <div class="search-container">
      <input type="number" placeholder="Buscar producto..." [(ngModel)]="nombreBusqueda" (keyup)="buscarMesas()"> <!--  [(ngModel)]="nombreBusqueda" (keyup)="buscarProductos()" -->
    </div>
    <div class="btn-black">
      <button (click) ="crearMesaModal()"> <!-- (click)="openModal()" -->
        Nueva mesa
      </button>
    </div>
  </div>

  <section class="component-main-content">
    <table class="tabla-listado" *ngIf="mesas.length > 0 ; else buscando">
      <thead class="cabecera-tabla">
      <tr class="row-header">
        <th class="row-header-element">
          NÚMERO MESA
        </th>
        <th class="row-header-element">
          ESTADO
        </th>
        <th class="row-header-element">
          ACCIONES
        </th>
      </tr>
      </thead>
      <tbody class="contenido-tabla">
        <tr class="row-contenido-tabla" *ngFor="let mesa of mesas; let i = index">
          <td class="row-contenido-element" *ngIf="!modoEdicion || (modoEdicion && i !== mesaEditandoIndex)" (click)="iniciarEdicion(i)">
            {{mesa.numeroMesa}}
          </td>
          <td class="row-contenido-element" *ngIf="modoEdicion && i === mesaEditandoIndex">
            {{mesa.numeroMesa}}
            <span>Nuevo número de mesa:</span>
            <input type="number" [(ngModel)]="nuevoNumeroMesa">
          </td>
          <td class="row-contenido-element" *ngIf="!modoEdicion || (modoEdicion && i !== mesaEditandoIndex)" (click)="iniciarEdicion(i)">
            {{mesa.estado}}
          </td>
          <td class="row-contenido-element" *ngIf="modoEdicion && i === mesaEditandoIndex">
            {{mesa.estado}}
            <span>Nuevo estado:</span>
            <select [(ngModel)]="nuevoEstadoMesa" (ngModelChange)="onEstadoSeleccionadoChance()">
              <option *ngFor="let estado of estadosMesa" [value]="estado">
                {{estado}}
              </option>
            </select>
          </td>
          <td class="row-contenido-element">
            <button class="btn-eliminar-element" (click)="deleteMesa(mesa.id)" *ngIf="!modoEdicion || (modoEdicion && i !== mesaEditandoIndex)">
              Borrar
            </button>
            <button class="btn-actualizar-element" *ngIf="modoEdicion && i === mesaEditandoIndex" (click)="guardarEdicion(mesa.id)">
              Guardar
            </button>
            <button class="btn-eliminar-element" *ngIf="modoEdicion && i === mesaEditandoIndex" (click)="cancelarEdicion()">
              Cancelar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="paginacion" *ngIf="mesas.length > 0">
      <img src="assets/icons/arrow-prev-small-svgrepo-com.svg" alt="anterior" *ngIf="!isFirst" (click)="previousPage()">
      <h3>Pagina {{pagina+1}}</h3>
      <img src="assets/icons/arrow-next-small-svgrepo-com.svg" alt="siguiente" *ngIf="!isLast" (click)="nextPage()">
    </div>
  </section>
</div>


<ng-template #buscando >
  <div class="cargando">
    <h2>No se han encontrado elementos para mesas.</h2>
    <img src="assets/img/running-cat.gif" alt="">

  </div>
</ng-template>
